<view class="container">
  <!-- æ´—è¡£æœºçŠ¶æ€å¡ç‰‡ -->
  <view class="status-card">
    <view class="status-header">
      <text class="status-title">æ´—è¡£æœºçŠ¶æ€</text>
      <text class="last-update">{{formatTime(status.updated_at)}}</text>
    </view>
    
    <view class="status-content">
      <view class="status-indicator {{status.status}}">
        <text class="status-text">{{getStatusText(status.status)}}</text>
      </view>
      
      <view wx:if="{{status.status === 'in_use'}}" class="usage-info">
        <view class="user-info">
          <text class="using-by">ä½¿ç”¨è€…ï¼š{{status.current_user_name}}</text>
        </view>
        <view class="time-info">
          <text class="start-time">å¼€å§‹æ—¶é—´ï¼š{{formatTime(status.start_time)}}</text>
          <text class="end-time">é¢„è®¡ç»“æŸï¼š{{formatTime(status.estimated_end_time)}}</text>
        </view>
        <view class="remaining-time">
          <text>å‰©ä½™æ—¶é—´ï¼š{{getRemainingTime(status.estimated_end_time)}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <button 
      wx:if="{{status.status === 'idle'}}" 
      class="action-btn start-btn" 
      bindtap="startUsing"
    >
      å¼€å§‹ä½¿ç”¨
    </button>
    
    <button 
      wx:if="{{status.status === 'in_use' && isCurrentUser}}" 
      class="action-btn finish-btn" 
      bindtap="finishUsing"
    >
      ä½¿ç”¨å®Œæˆ
    </button>
    
    <button 
      wx:if="{{status.status === 'in_use' && !isCurrentUser}}" 
      class="action-btn disabled-btn" 
      disabled
    >
      ä½¿ç”¨ä¸­...
    </button>
  </view>

  <!-- é¢„çº¦åˆ—è¡¨ -->
  <view wx:if="{{reservations.length > 0}}" class="reservations">
    <view class="section-title">ğŸ“… é¢„çº¦åˆ—è¡¨</view>
    <view class="reservation-list">
      <view 
        wx:for="{{reservations}}" 
        wx:key="id" 
        class="reservation-item"
      >
        <view class="reservation-user">{{item.user_name}}</view>
        <view class="reservation-time">{{formatTime(item.reserved_time)}}</view>
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="quick-actions">
    <view class="section-title">âš¡ å¿«æ·æ“ä½œ</view>
    <view class="quick-btn-group">
      <button class="quick-btn" bindtap="goToHistory">æŸ¥çœ‹å†å²</button>
      <button class="quick-btn" bindtap="goToReserve">é¢„çº¦ä½¿ç”¨</button>
      <button class="quick-btn" bindtap="refreshStatus">åˆ·æ–°çŠ¶æ€</button>
    </view>
  </view>

  <!-- ä½¿ç”¨æç¤º -->
  <view class="tips">
    <view class="tips-title">ğŸ’¡ ä½¿ç”¨æç¤º</view>
    <view class="tips-content">
      <text>â€¢ ä½¿ç”¨å‰è¯·æ£€æŸ¥æ´—è¡£æœºå†…æ˜¯å¦æœ‰é—ç•™ç‰©å“</text>
      <text>â€¢ ä½¿ç”¨å®Œæˆåè¯·åŠæ—¶æ ‡è®°ï¼Œæ–¹ä¾¿ä»–äººä½¿ç”¨</text>
      <text>â€¢ å»ºè®®é¢„çº¦åŠŸèƒ½é¿å…ä½¿ç”¨å†²çª</text>
    </view>
  </view>
</view> 