<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">ğŸ“… ç®€å•é¢„çº¦</text>
    <text class="page-subtitle">å¿«é€Ÿé¢„çº¦ï¼Œæ™ºèƒ½é€šçŸ¥</text>
  </view>

  <!-- å½“å‰çŠ¶æ€æ¦‚è§ˆ -->
  <view class="status-overview">
    <view class="overview-item">
      <text class="overview-label">å½“å‰çŠ¶æ€</text>
      <text class="overview-value {{status.status}}">{{getStatusText(status.status)}}</text>
    </view>
    <view wx:if="{{status.status === 'in_use'}}" class="overview-item">
      <text class="overview-label">é¢„è®¡å®Œæˆ</text>
      <text class="overview-value">{{formatTime(status.estimated_end_time)}}</text>
    </view>
  </view>

  <!-- å¿«é€Ÿé¢„çº¦ -->
  <view class="quick-reserve-card">
    <view class="card-header">
      <text class="card-title">âš¡ å¿«é€Ÿé¢„çº¦</text>
    </view>
    <view class="card-content">
      <view class="reserve-time-selector">
        <text class="selector-label">é€‰æ‹©æ—¶é—´ï¼š</text>
        <picker mode="time" value="{{selectedTime}}" bindchange="onTimeChange">
          <view class="time-picker">
            <text>{{selectedTime || 'ç‚¹å‡»é€‰æ‹©æ—¶é—´'}}</text>
            <text class="picker-arrow">ğŸ“…</text>
          </view>
        </picker>
      </view>
      
      <button 
        class="reserve-btn" 
        bindtap="makeReservation"
        disabled="{{!selectedTime}}"
      >
        ğŸš€ é¢„çº¦å¹¶é€šçŸ¥ç¾¤
      </button>
    </view>
  </view>

  <!-- ä»Šæ—¥é¢„çº¦åˆ—è¡¨ -->
  <view class="today-reservations">
    <view class="section-header">
      <text class="section-title">ğŸ“‹ ä»Šæ—¥é¢„çº¦ ({{reservations.length}}ä¸ª)</text>
      <button wx:if="{{reservations.length > 0}}" class="notify-all-btn" bindtap="notifyAllReservations">
        ğŸ“¢ é€šçŸ¥å…¨éƒ¨
      </button>
    </view>
    
    <view wx:if="{{reservations.length === 0}}" class="empty-state">
      <text class="empty-text">ğŸŒŸ ä»Šå¤©è¿˜æ²¡æœ‰é¢„çº¦</text>
      <text class="empty-hint">ä½¿ç”¨ä¸Šæ–¹å¿«é€Ÿé¢„çº¦åŠŸèƒ½æ·»åŠ é¢„çº¦</text>
    </view>
    
    <view wx:else class="reservation-list">
      <view 
        wx:for="{{reservations}}" 
        wx:key="id" 
        class="reservation-item {{item.status}}"
      >
        <view class="reservation-info">
          <view class="reservation-user">
            <text class="user-name">{{item.user_name}}</text>
            <text wx:if="{{item.is_current_user}}" class="current-user-tag">æˆ‘çš„</text>
          </view>
          <view class="reservation-time">
            <text class="time-text">â° {{formatTime(item.reserved_time)}}</text>
            <text class="status-text">{{getReservationStatusText(item.status)}}</text>
          </view>
        </view>
        
        <view class="reservation-actions">
          <button 
            wx:if="{{item.is_current_user}}" 
            class="action-btn cancel-btn" 
            bindtap="cancelReservation"
            data-id="{{item.id}}"
          >
            âŒ
          </button>
          <button 
            class="action-btn notify-btn" 
            bindtap="notifyReservation"
            data-id="{{item.id}}"
            data-user="{{item.user_name}}"
            data-time="{{item.reserved_time}}"
          >
            ğŸ“¢
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- æ™ºèƒ½æé†’è®¾ç½® -->
  <view class="smart-reminder-card">
    <view class="card-header">
      <text class="card-title">ğŸ¤– æ™ºèƒ½æé†’</text>
    </view>
    <view class="card-content">
      <view class="reminder-option">
        <view class="option-info">
          <text class="option-title">é¢„çº¦å‰æé†’</text>
          <text class="option-desc">åœ¨é¢„çº¦æ—¶é—´å‰15åˆ†é’Ÿæé†’</text>
        </view>
        <switch 
          checked="{{reminderSettings.beforeReminder}}" 
          bindchange="toggleBeforeReminder"
          color="#2196F3"
        />
      </view>
      
      <view class="reminder-option">
        <view class="option-info">
          <text class="option-title">è‡ªåŠ¨ç¾¤é€šçŸ¥</text>
          <text class="option-desc">é¢„çº¦æˆåŠŸåè‡ªåŠ¨å‘é€ç¾¤é€šçŸ¥</text>
        </view>
        <switch 
          checked="{{reminderSettings.autoNotify}}" 
          bindchange="toggleAutoNotify"
          color="#2196F3"
        />
      </view>
    </view>
  </view>

  <!-- é¢„çº¦ä½¿ç”¨æç¤º -->
  <view class="tips-card">
    <view class="tips-header">
      <text class="tips-title">ğŸ’¡ ä½¿ç”¨å°è´´å£«</text>
    </view>
    <view class="tips-content">
      <view class="tip-item">
        <text class="tip-icon">ğŸ“¢</text>
        <text class="tip-text">é¢„çº¦åä¼šè‡ªåŠ¨ç”Ÿæˆç¾¤é€šçŸ¥æ¶ˆæ¯ï¼Œç‚¹å‡»å¤åˆ¶å‘é€</text>
      </view>
      <view class="tip-item">
        <text class="tip-icon">â°</text>
        <text class="tip-text">å»ºè®®åœ¨é¢„çº¦æ—¶é—´å‰5åˆ†é’Ÿåˆ°è¾¾æ´—è¡£æˆ¿</text>
      </view>
      <view class="tip-item">
        <text class="tip-icon">ğŸ¤</text>
        <text class="tip-text">å¦‚æœ‰å†²çªï¼Œå¯ä»¥åœ¨ç¾¤é‡Œåè°ƒæ—¶é—´</text>
      </view>
    </view>
  </view>
</view> 